/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/ol-layerswitcher@3.6.0/dist/ol-layerswitcher.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("ol/control/Control"),require("ol/Observable")):"function"==typeof define&&define.amd?define(["ol/control/Control","ol/Observable"],t):e.LayerSwitcher=t(e.ol.control.Control,e.ol.Observable)}(this,function(e,t){"use strict";e="default"in e?e.default:e;var n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},o="layer-switcher-",a=function(a){function l(e){n(this,l);var t=e||{},r=t.tipLabel?t.tipLabel:"Legend",o=document.createElement("div"),a=i(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,{element:o,target:t.target}));a.activationMode=t.activationMode||"mouseover";var s=void 0!==t.collapseLabel?t.collapseLabel:"Â»",c=void 0!==t.label?t.label:"";a.groupSelectStyle=l.getGroupSelectStyle(t.groupSelectStyle),a.reverse=!1!==t.reverse,a.mapListeners=[],a.hiddenClassName="ol-unselectable ol-control layer-switcher",l.isTouchDevice_()&&(a.hiddenClassName+=" touch"),a.shownClassName="shown",o.className=a.hiddenClassName;var u=document.createElement("button");u.setAttribute("title",r),o.appendChild(u),a.panel=document.createElement("div"),a.panel.className="panel",o.appendChild(a.panel),l.enableTouchScroll_(a.panel);var d=a;return u.textContent=c,"click"==a.activationMode?(o.classList.add("activationModeClick"),u.onclick=function(e){e=e||window.event,d.element.classList.contains(d.shownClassName)?(d.hidePanel(),u.textContent=c):(d.showPanel(),u.textContent=s),e.preventDefault()},i(a)):(u.onmouseover=function(e){d.showPanel()},u.onclick=function(e){e=e||window.event,d.showPanel(),e.preventDefault()},d.panel.onmouseout=function(e){e=e||window.event,d.panel.contains(e.toElement||e.relatedTarget)||d.hidePanel()},a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,e),r(l,[{key:"setMap",value:function(e){for(var n=0;n<this.mapListeners.length;n++)t.unByKey(this.mapListeners[n]);if(this.mapListeners.length=0,function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"setMap",this).call(this,e),e){if(this.renderPanel(),"click"==this.activationMode)return;var r=this;this.mapListeners.push(e.on("pointerdown",function(){r.hidePanel()}))}}},{key:"showPanel",value:function(){this.element.classList.contains(this.shownClassName)||(this.element.classList.add(this.shownClassName),this.renderPanel())}},{key:"hidePanel",value:function(){this.element.classList.contains(this.shownClassName)&&this.element.classList.remove(this.shownClassName)}},{key:"renderPanel",value:function(){this.dispatchEvent({type:"render"}),l.renderPanel(this.getMap(),this.panel,{groupSelectStyle:this.groupSelectStyle,reverse:this.reverse}),this.dispatchEvent({type:"rendercomplete"})}}],[{key:"renderPanel",value:function(e,t,n){var r=new Event("render");for(t.dispatchEvent(r),(n=n||{}).groupSelectStyle=l.getGroupSelectStyle(n.groupSelectStyle),l.ensureTopVisibleBaseLayerShown_(e);t.firstChild;)t.removeChild(t.firstChild);l.forEachRecursive(e,function(e,t,n){e.set("indeterminate",!1)}),"children"===n.groupSelectStyle||"none"===n.groupSelectStyle?l.setGroupVisibility(e):"group"===n.groupSelectStyle&&l.setChildVisibility(e);var i=document.createElement("ul");t.appendChild(i),l.renderLayers_(e,e,i,n,function(r){l.renderPanel(e,t,n)});var o=new Event("rendercomplete");t.dispatchEvent(o)}},{key:"isBaseGroup",value:function(e){var t=e.getLayers?e.getLayers().getArray():[];return t.length&&"base"===t[0].get("type")}},{key:"setGroupVisibility",value:function(e){l.getGroupsAndLayers(e,function(e){return e.getLayers&&!e.get("combine")&&!l.isBaseGroup(e)}).reverse().forEach(function(e){var t=e.getLayersArray().map(function(e){return e.getVisible()});t.every(function(e){return!0===e})?(e.setVisible(!0),e.set("indeterminate",!1)):t.every(function(e){return!1===e})?(e.setVisible(!1),e.set("indeterminate",!1)):(e.setVisible(!0),e.set("indeterminate",!0))})}},{key:"setChildVisibility",value:function(e){l.getGroupsAndLayers(e,function(e){return e.getLayers&&!e.get("combine")&&!l.isBaseGroup(e)}).forEach(function(e){var t=e.getVisible(),n=e.get("indeterminate");e.getLayers().getArray().forEach(function(e){e.set("indeterminate",!1),t&&!n||!e.getVisible()||e.set("indeterminate",!0)})})}},{key:"ensureTopVisibleBaseLayerShown_",value:function(e){var t;l.forEachRecursive(e,function(e,n,r){"base"===e.get("type")&&e.getVisible()&&(t=e)}),t&&l.setVisible_(e,t,!0)}},{key:"getGroupsAndLayers",value:function(e,t){var n=[];return t=t||function(e,t,n){return!0},l.forEachRecursive(e,function(e,r,i){e.get("title")&&t(e,r,i)&&n.push(e)}),n}},{key:"setVisible_",value:function(e,t,n,r){t.setVisible(n),n&&"base"===t.get("type")&&l.forEachRecursive(e,function(e,n,r){e!=t&&"base"===e.get("type")&&e.setVisible(!1)}),t.getLayers&&!t.get("combine")&&"children"===r&&t.getLayers().forEach(function(n){l.setVisible_(e,n,t.getVisible(),r)})}},{key:"renderLayer_",value:function(e,t,n,r,i){var a=document.createElement("li"),s=t.get("title"),c=l.uuid(),u=document.createElement("label");if(t.getLayers&&!t.get("combine")){var d=l.isBaseGroup(t);if(a.classList.add("group"),d&&a.classList.add(o+"base-group"),t.get("fold")){a.classList.add(o+"fold"),a.classList.add(o+t.get("fold"));var p=document.createElement("button");p.onclick=function(e){e=e||window.event,l.toggleFold_(t,a),e.preventDefault()},a.appendChild(p)}if(!d&&"none"!=r.groupSelectStyle){var h=document.createElement("input");h.type="checkbox",h.id=c,h.checked=t.getVisible(),h.indeterminate=t.get("indeterminate"),h.onchange=function(n){l.setVisible_(e,t,n.target.checked,r.groupSelectStyle),i(t)},a.appendChild(h),u.htmlFor=c}u.innerHTML=s,a.appendChild(u);var f=document.createElement("ul");a.appendChild(f),l.renderLayers_(e,t,f,r,i)}else{a.className="layer";var v=document.createElement("input");"base"===t.get("type")?(v.type="radio",v.name="base"):v.type="checkbox",v.id=c,v.checked=t.get("visible"),v.indeterminate=t.get("indeterminate"),v.onchange=function(n){l.setVisible_(e,t,n.target.checked,r.groupSelectStyle),i(t)},a.appendChild(v),u.htmlFor=c,u.innerHTML=s;var y=e.getView().getResolution();(y>t.getMaxResolution()||y<t.getMinResolution())&&(u.className+=" disabled"),a.appendChild(u)}return a}},{key:"renderLayers_",value:function(e,t,n,r,i){var o=t.getLayers().getArray().slice();r.reverse&&(o=o.reverse());for(var a,s=0;s<o.length;s++)(a=o[s]).get("title")&&n.appendChild(l.renderLayer_(e,a,s,r,i))}},{key:"forEachRecursive",value:function(e,t){e.getLayers().forEach(function(e,n,r){t(e,n,r),e.getLayers&&l.forEachRecursive(e,t)})}},{key:"uuid",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}},{key:"enableTouchScroll_",value:function(e){if(l.isTouchDevice_()){var t=0;e.addEventListener("touchstart",function(e){t=this.scrollTop+e.touches[0].pageY},!1),e.addEventListener("touchmove",function(e){this.scrollTop=t-e.touches[0].pageY},!1)}}},{key:"isTouchDevice_",value:function(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}},{key:"toggleFold_",value:function(e,t){t.classList.remove(o+e.get("fold")),e.set("fold","open"===e.get("fold")?"close":"open"),t.classList.add(o+e.get("fold"))}},{key:"getGroupSelectStyle",value:function(e){return["none","children","group"].indexOf(e)>=0?e:"children"}}]),l}();return window.ol&&window.ol.control&&(window.ol.control.LayerSwitcher=a),a});
//# sourceMappingURL=/sm/58c10cd4b2e00491c841df6a7e353e49aa36d7249bb3cbc24ab465d6f1a5a60d.map